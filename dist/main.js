!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=1)}([function(t,e,r){},function(t,e,r){"use strict";r.r(e);r(0);var n=function(){d3.csv("../data/market_share.csv").then((function(t){return function(t){t.columns.slice(1);var e={top:20,right:40,bottom:20,left:40},r=900-e.left-e.right,n=600-e.top-e.bottom,a=d3.scaleLinear().range([0,r]),o=d3.scaleLinear().range([n,0]),i=d3.scaleOrdinal(d3.schemeCategory10),l=d3.axisBottom(a),c=d3.axisLeft(o),u=d3.line().x((function(t){return a(t.year)})).y((function(t){return o(t.share)})).curve(d3.curveCardinal),d=d3.select("#chart-container").append("svg").attr("id","line-chart").attr("width",r+e.left+e.right).attr("height",n+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")");i.domain(d3.keys(t[0]).filter((function(t){return"year"!==t})));var s=i.domain().map((function(e){return{name:e,values:t.map((function(t){return{year:t.year,share:+t[e]}}))}}));a.domain(d3.extent(t,(function(t){return t.year}))),o.domain([d3.min(s,(function(t){return d3.min(t.values,(function(t){return t.share}))})),50]);var f=d.selectAll("g").data(s).enter().append("g").attr("class","legend");f.append("rect").attr("x",r-20).attr("y",(function(t,e){return 20*e})).attr("width",10).attr("height",10).style("fill",(function(t){return i(t.name)})),f.append("text").attr("x",r-25).attr("y",(function(t,e){return 20*e+9})).text((function(t){return t.name})),d.append("g").attr("class","x axis").attr("transform","translate(0,"+n+")").call(l),d.append("g").attr("class","y axis").call(c).append("text").attr("transform","rotate(-90)").attr("y",8).attr("dy",".7em").style("text-anchor","end").text("Market Share (%)");var m=d.selectAll(".company").data(s).enter().append("g").attr("class","company");m.append("path").attr("class","line").attr("d",(function(t){return u(t.values)})).style("stroke",(function(t){return i(t.name)}));m.append("text").datum((function(t){return{name:t.name,value:t.values[t.values.length-1]}})).attr("transform",(function(t){return"translate("+a(t.value.year)+","+o(t.value.share)+")"})).attr("x",36).attr("dy",".85em").text((function(t){return t.name}));var p=d.append("g").attr("class","mouse-over-effects");p.append("path").attr("class","mouse-line").style("stroke","black").style("stroke-width","1px").style("opacity","0");var y=document.getElementsByClassName("line"),h=p.selectAll(".mouse-per-line").data(s).enter().append("g").attr("class","mouse-per-line");h.append("circle").attr("r",7).style("stroke",(function(t){return i(t.name)})).style("fill","none").style("stroke-width","1px").style("opacity","0"),h.append("text").attr("transform","translate(10,3)");p.append("svg:rect").attr("width",r).attr("height",n).attr("fill","none").attr("pointer-events","all").on("mouseout",(function(){d3.select(".mouse-line").style("opacity","0"),d3.selectAll(".mouse-per-line circle").style("opacity","0"),d3.selectAll(".mouse-per-line text").style("opacity","0")})).on("mouseover",(function(){d3.select(".mouse-line").style("opacity","1"),d3.selectAll(".mouse-per-line circle").style("opacity","1"),d3.selectAll(".mouse-per-line text").style("opacity","1")})).on("mousemove",(function(){var t=d3.mouse(this);d3.select(".mouse-line").attr("d",(function(){var e="M"+t[0]+","+n;return e+=" "+t[0]+",0"})),d3.selectAll(".mouse-per-line").attr("transform",(function(e,r){for(var n=a.invert(t[0]),i=((0,d3.bisector((function(t){return t.year})).right)(e.values,n),0),l=y[r].getTotalLength();;){var c=Math.floor((i+l)/2),u=y[r].getPointAtLength(c);if((c===l||c===i)&&u.x!==t[0])break;if(u.x>t[0])l=c;else{if(!(u.x<t[0]))break;i=c}}return d3.select(this).select("text").text(o.invert(pos.y).toFixed(2)),"translate("+t[0]+","+y[r].getPointAtLength(null).y+")"}))}))}(t)}))};document.querySelector("#year-breakdown").addEventListener("click",(function(){if(null!==document.querySelector("#line-chart")){var t=document.querySelector("#line-chart");t.parentNode.removeChild(t),document.querySelector("#market-share").removeAttribute("class")}else if(null!==document.querySelector("#donut-chart")){var e=document.querySelector("#donut-chart");e.parentNode.removeChild(e);var r=document.querySelector("#donut-tip");r.parentNode.removeChild(r),document.querySelector("#gender-breakdown").removeAttribute("class")}else if(null!==document.querySelector("#bubble-chart")){var n=document.querySelector("#bubble-chart");n.parentNode.removeChild(n),document.querySelector("#box-office").removeAttribute("class")}document.getElementById("year-breakdown").classList.add("clicked"),function(){d3.select("#chart-container").append("svg").attr("id","bar-chart").attr("width",1200).attr("height",500);var t=d3.select("#bar-chart"),e=t.attr("width")-150,r=t.attr("height")-150,n=d3.scaleBand().range([0,e]).padding(.6),a=d3.scaleLinear().range([r,0]),o=t.append("g").attr("transform","translate(100,100)");function i(t,e){d3.select(this).attr("class","highlight"),d3.select(this).transition().duration(400).attr("width",n.bandwidth()+2).attr("y",(function(t){return a(t.issues)-10})).attr("height",(function(t){return r-a(t.issues)+10})),o.append("text").attr("class","val").attr("id","issues").attr("x",(function(){return 590})).attr("y",(function(){return 10})).text((function(){return"".concat([t.issues]," issues released in ").concat(t.year)}))}function l(t,e){d3.select(this).attr("class","bar"),d3.select(this).transition().duration(400).attr("width",n.bandwidth()).attr("y",(function(t){return a(t.issues)})).attr("height",(function(t){return r-a(t.issues)})),d3.selectAll(".val").remove()}d3.csv("./data/yearData.csv").then((function(c){n.domain(c.map((function(t){return t.year}))),a.domain([0,1300]),o.append("g").attr("transform","translate(0,"+r+")").call(d3.axisBottom(n)).append("text").attr("y",r-200).attr("x",e-100).attr("text-anchor","end").attr("stroke","black").text("Year"),o.append("g").call(d3.axisLeft(a).tickFormat((function(t){return t})).ticks(10)).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy","-5.1em").attr("text-anchor","end").attr("stroke","black").text("(Unique) issues released"),t.append("text").attr("transform","translate(100,0)").attr("x",50).attr("y",50).attr("font-size","24px").text("# of releases (Marvel)"),o.selectAll(".bar").data(c).enter().append("rect").attr("class","bar").on("mouseover",i).on("mouseout",l).attr("x",(function(t){return n(t.year)})).attr("y",(function(t){return a(0)})).attr("width",n.bandwidth()).attr("height",(function(t){return r-a(0)})),t.selectAll("rect").transition().duration(1200).attr("y",(function(t){return a(t.issues)})).attr("height",(function(t){return r-a(t.issues)})).delay((function(t,e){return 13*e}))}))}()})),document.querySelector("#gender-breakdown").addEventListener("click",(function(){if(null!==document.querySelector("#line-chart")){var t=document.querySelector("#line-chart");t.parentNode.removeChild(t),document.querySelector("#market-share").removeAttribute("class")}else if(null!==document.querySelector("#bar-chart")){var e=document.querySelector("#bar-chart");e.parentNode.removeChild(e),document.querySelector("#year-breakdown").removeAttribute("class")}else if(null!==document.querySelector("#bubble-chart")){var r=document.querySelector("#bubble-chart");r.parentNode.removeChild(r),document.querySelector("#box-office").removeAttribute("class")}document.getElementById("gender-breakdown").classList.add("clicked"),function(){var t=Math.min(540,540)/2,e=d3.scaleOrdinal(d3.schemeCategory10);d3.select("#chart-container").append("svg").attr("id","donut-chart");var r=d3.select("#donut-chart").attr("width",540).attr("height",540).append("g").attr("transform","translate(270,270)"),n=d3.arc().innerRadius(t-100).outerRadius(t),a=d3.pie().value((function(t){return t.count})).sort(null),o=d3.select("body").append("div").attr("id","donut-tip").style("opacity",0);r.selectAll("path").data(a([{title:"Male",count:85023},{title:"Female",count:37762},{title:"Other",count:16626}])).enter().append("path").attr("d",n).attr("fill",(function(t,r){return e(t.data.title)})).on("mouseover",(function(t,e){d3.select(this).transition().duration("50").attr("opacity",".85"),o.transition().duration(50).style("opacity",1);var r=Math.round(t.data.count/14e4*100).toString()+"%";o.html(r).style("left",d3.event.pageX+210+"px").style("top",d3.event.pageY-315+"px")})).on("mouseout",(function(t,e){d3.select(this).transition().duration("50").attr("opacity",1),o.transition().duration("50").style("opacity",0)})).attr("transform","translate(0,0)").transition().ease(d3.easeLinear).duration(1700).attrTween("d",(function(t){var e=d3.interpolate({startAngle:1.1*Math.PI,endAngle:1.1*Math.PI},t);return function(t){return n(e(t))}}));r.append("text").attr("transform","translate(100,0)").attr("x",-25).attr("y",50).text("Character gender (All Publishers)");var i=r.selectAll(".legend").data(e.domain()).enter().append("g").attr("class","circle-legend").attr("transform",(function(t,r){return"translate(-33,"+(21*r-21*e.domain().length/2)+")"}));i.append("circle").style("fill",e).style("stroke",e).attr("cx",0).attr("cy",0).attr("r",".5rem"),i.append("text").attr("x",46).attr("y",2).text((function(t){return t}))}()})),document.querySelector("#box-office").addEventListener("click",(function(){if(null!==document.querySelector("#line-chart")){var t=document.querySelector("#line-chart");t.parentNode.removeChild(t),document.querySelector("#market-share").removeAttribute("class")}else if(null!==document.querySelector("#bar-chart")){var e=document.querySelector("#bar-chart");e.parentNode.removeChild(e),document.querySelector("#year-breakdown").removeAttribute("class")}else if(null!==document.querySelector("#donut-chart")){var r=document.querySelector("#donut-chart");r.parentNode.removeChild(r);var n=document.querySelector("#donut-tip");n.parentNode.removeChild(n),document.querySelector("#gender-breakdown").removeAttribute("class")}document.getElementById("box-office").classList.add("clicked");var a=document.getElementById("body");a.setAttribute("style","background: linear-gradient(to bottom, #43cea2, #185a9d);"),function(){var t={children:[{title:"Avengers: Endgame",studio:"Marvel/Disney",boxOffice:2797800564},{title:"Avengers: Infinity War",studio:"Marvel/Disney",boxOffice:2048359754},{title:"The Avengers",studio:"Marvel/Disney",boxOffice:1518812988},{title:"Avengers: Age of Ultron",studio:"Marvel/Disney",boxOffice:1405403694},{title:"Black Panther",studio:"Marvel/Disney",boxOffice:1346913171},{title:"Incredibles 2",studio:"Disney/Pixar",boxOffice:1242805359},{title:"Iron Man 3",studio:"Marvel/Disney",boxOffice:1214811252},{title:"Captain America: Civil War",studio:"Marvel/Disney",boxOffice:1153304495},{title:"Aquaman",studio:"DC/Warner Bros.",boxOffice:2048359754},{title:"Spider-Man: Far From Home",studio:"Marvel/Sony",boxOffice:1131927996},{title:"Captain Marvel",studio:"Marvel/Disney",boxOffice:1128274794},{title:"The Dark Knight Rises",studio:"DC/Warner Bros.",boxOffice:1081041287},{title:"Joker",studio:"DC/Warner Bros.",boxOffice:1074251311},{title:"The Dark Knight",studio:"DC/Warner Bros.",boxOffice:1004558444},{title:"Spider-Man 3",studio:"Marvel/Sony",boxOffice:890871626},{title:"Spider-Man: Homecoming",studio:"Marvel/Sony",boxOffice:880166924},{title:"Batman v. Superman: Dawn of Justice",studio:"DC/Warner Bros.",boxOffice:873634919},{title:"Guardians of the Galaxy Vol. 2",studio:"Marvel/Disney",boxOffice:863756051},{title:"Venom",studio:"Marvel/Sony",boxOffice:856085151},{title:"Thor: Ragnarok",studio:"Marvel/Disney",boxOffice:853977126},{title:"Wonder Woman",studio:"DC/Warner Bros.",boxOffice:863756051},{title:"Spider-Man",studio:"Marvel/Sony",boxOffice:821708551},{title:"Spider-Man 2",studio:"Marvel/Sony",boxOffice:788976453},{title:"Deadpool 2",studio:"Marvel/20th Century Fox",boxOffice:785046920},{title:"Deadpool",studio:"Marvel/20th Century Fox",boxOffice:783112979}]},e=d3.scaleOrdinal(d3.schemeCategory10);!function(){if(window.innerWidth/window.innerHeight>1.2);else;}();var r=d3.pack(t).size([900,900]).padding(.9),n=d3.select("#chart-container").append("svg").attr("id","bubble-chart").attr("width",900).attr("height",900).attr("class","bubble"),a=d3.hierarchy(t).sum((function(t){return t.boxOffice})),o=n.selectAll(".node").data(r(a).descendants()).enter().filter((function(t){return!t.children})).append("g").on("mouseover",(function(t,e){d3.select(this).transition().duration("100").attr("opacity",".7")})).on("mouseout",(function(t,e){d3.select(this).transition().duration("100").attr("opacity","1")})).attr("class","node").attr("transform",(function(t){return"translate("+t.x+","+t.y+")"}));o.append("title").text((function(t){return t.title})),o.append("studio").text((function(t){return t.studio})),o.append("circle").attr("r",(function(t){return t.r})).style("fill",(function(t,r){return e(r)})),o.append("text").attr("dy",".03em").style("text-anchor","middle").text((function(t){return t.data.title})).attr("font-size",(function(t){return t.r/5})).attr("fill","white"),o.append("text").attr("dy","1.3em").style("text-anchor","middle").text((function(t){return"$"+t.data.boxOffice.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")})).attr("font-size",(function(t){return t.r/5})).attr("fill","white"),d3.select(self.frameElement).style("height","900px")}()})),document.querySelector("#market-share").addEventListener("click",(function(){if(null!==document.querySelector("#bar-chart")){var t=document.querySelector("#bar-chart");t.parentNode.removeChild(t),document.querySelector("#year-breakdown").removeAttribute("class")}else if(null!==document.querySelector("#donut-chart")){var e=document.querySelector("#donut-chart");e.parentNode.removeChild(e);var r=document.querySelector("#donut-tip");r.parentNode.removeChild(r),document.querySelector("#gender-breakdown").removeAttribute("class")}else if(null!==document.querySelector("#bubble-chart")){var a=document.querySelector("#bubble-chart");a.parentNode.removeChild(a),document.querySelector("#box-office").removeAttribute("class")}document.getElementById("market-share").classList.add("clicked"),n()}))}]);
//# sourceMappingURL=main.js.map